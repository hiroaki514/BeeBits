<h1>Timelines#index</h1>

<p>Welcome, <%= current_user.name %>!</p>
<p>あなたのID名は <%= current_user.beebits_name %></p>

<div>
  <%= form_with(model: @timeline, url: timelines_path, local: true) do |form| %>
    <div>
      <%= form.label :content, "投稿内容:" %>
      <%= form.text_area :content, id: 'content', rows: 4 %>
      <%= form.submit "投稿", class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
<div>
  <%= form_with(model: @reserve_post_timeline, url: reserve_post_timelines_path, local: true) do |form| %>
    <div>
      <%= form.hidden_field :user_id, value: current_user.id %>
      <%= form.label :content, "予約内容:" %>
      <%= form.text_area :content, id: 'reserve_post_content', rows: 4 %>
      <%= form.submit "予約投稿", class: "btn btn-primary" %>
    </div>
  <% end %>
</div>

<% @timelines.each do |t| %>
  <div>
    <p><strong><%= t.user.beebits_name %></strong>: <%= t.content %></p>
    <% if current_user == t.user %>
      <%= button_to "削除", timeline_path(t), method: :delete, data: { confirm: '本当に削除しますか?' } %>
    <% end %>
    <% if current_user.favorited_by?(t.id) %>
      <%= button_to 'いいねを外す', destroy_favorite_path(t), method: :delete %> <%= t.favorites.count %>
    <% else %>
      <%= button_to 'いいね', add_to_favorites_path(t), method: :post %> <%= t.favorites.count %>
    <% end %>
  </div>
<% end %>


<%= button_to "ログアウト", destroy_user_session_path, method: :delete, data: { confirm: 'Are you sure?' } %>
